<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BoneAppetite - Dog-Friendly Restaurant Locator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { fontFamily: { inter: ['Inter','Poppins','sans-serif'] } } }
    }
  </script>
  <script>
    if (localStorage.getItem('theme') === 'dark') {
      document.documentElement.classList.add('dark');
    }
  </script>
  <style>
    .fade-out { opacity: 0; pointer-events: none; transition: opacity 1s ease-in-out; }
    .fade-in  { opacity: 1; transition: opacity 1s ease-in; }
    @keyframes fadeInUp { 0% {opacity:0; transform:translateY(20px)} 100% {opacity:1; transform:translateY(0)} }
    .animate-fadeInUp { animation: fadeInUp 1.2s ease-out forwards; }
    header {
      background: #924d23E5;
      color: #fff;
    }
    html.dark header { background: rgba(17,24,39,.95); color: #f9fafb; }
    .hero-bones {
      position: relative;
      height: calc(100vh - 72px);
      min-height: 520px;
      display: grid;
      place-items: end center;
      padding-bottom: 5rem;
      --bones-light: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'>\
<rect width='60' height='60' fill='%23d9ded8'/>\
<g fill='none' stroke='%23926f65' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' opacity='0.55'>\
  <path d='M10 14c2.2-2.2 5.8-2.2 8 0l6 6-6 6c-2.2 2.2-5.8 2.2-8 0-1.2-1.2-1.8-2.8-1.8-4.4S8.8 15.2 10 14z'/>\
  <path d='M42 26c2.2-2.2 5.8-2.2 8 0 2.2 2.2 2.2 5.8 0 8-2.2 2.2-5.8 2.2-8 0l-6-6 6-6z'/>\
  <path d='M18 42c2.2-2.2 5.8-2.2 8 0l6 6-6 6c-2.2 2.2-5.8 2.2-8 0-2.2-2.2-2.2-5.8 0-8z'/>\
</g>\
</svg>");
      --bones-dark: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'>\
<rect width='60' height='60' fill='%230b0b10'/>\
<g fill='none' stroke='%23cbd5e1' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' opacity='0.35'>\
  <path d='M10 14c2.2-2.2 5.8-2.2 8 0l6 6-6 6c-2.2 2.2-5.8 2.2-8 0-1.2-1.2-1.8-2.8-1.8-4.4S8.8 15.2 10 14z'/>\
  <path d='M42 26c2.2-2.2 5.8-2.2 8 0 2.2 2.2 2.2 5.8 0 8-2.2 2.2-5.8 2.2-8 0l-6-6 6-6z'/>\
  <path d='M18 42c2.2-2.2 5.8-2.2 8 0l6 6-6 6c-2.2 2.2-5.8 2.2-8 0-2.2-2.2-2.2-5.8 0-8z'/>\
</g>\
</svg>");
      background-image: var(--bones-light);
      background-size: 60px 60px;
      background-repeat: repeat;
      animation: pan 60s linear infinite;
    }
    html.dark .hero-bones { background-image: var(--bones-dark); }
    @keyframes pan { 0% { background-position: 0 0; } 100% { background-position: 600px 600px; } }
    .hero-card {
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(8px);
    }
    html.dark .hero-card { background: rgba(31,41,55,.88); }
  </style>
</head>
<body class="font-inter bg-[#f9f9f9] overflow-x-hidden min-h-screen transition-colors duration-300 flex flex-col">
  <div id="loadingScreen" class="fixed inset-0 bg-white dark:bg-[#0b0b10] z-[9999] flex flex-col justify-center items-center">
    <img src="headerpic.png" alt="BoneAppetite Logo" class="w-56 h-auto mb-4 opacity-0 animate-fadeInUp" />
    <p class="text-base text-gray-500 dark:text-gray-300 opacity-0 animate-fadeInUp" style="animation-delay:.2s">
      Dog-Friendly Restaurant Locator
    </p>
  </div>
  <div id="mainContent" class="opacity-0 flex-1 flex flex-col">
    <header class="sticky top-0 z-10 backdrop-blur shadow-md px-6 py-4 flex justify-between items-center transition-colors">
      <div class="flex items-center gap-3">
        <a href="index.html"><img src="headerpic.png" alt="Logo" class="h-12 w-auto" /></a>
      </div>
      <nav class="flex items-center gap-3 relative">
        <div class="relative">
          <button id="settingsBtn" class="text-sm text-white/90 hover:text-white px-3 py-2 rounded hover:bg-white/10">Settings ‚åÑ</button>
          <div id="settingsMenu" class="hidden absolute right-0 mt-2 w-44 bg-white dark:bg-gray-800 rounded shadow-lg overflow-hidden">
            <button id="darkModeToggle" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700">üåô Dark Mode</button>
            <button id="logoutBtn" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700">üö™ Logout</button>
          </div>
        </div>
        <a href="auth.html" class="text-sm text-white bg-gray-900 px-3 py-2 rounded hover:bg-black">Sign In</a>
      </nav>
    </header>
    <section class="hero-bones">
      <div class="hero-card rounded-xl shadow-xl max-w-3xl w-[90%] p-6">
        <h2 class="text-center text-xl font-semibold text-gray-800 dark:text-white mb-3">
          Find dog-friendly places near you
        </h2>
        <div class="flex flex-col md:flex-row items-center justify-center gap-3">
          <button id="useMyLocation"
                  class="rounded-xl px-6 py-3 text-white text-sm transition"
                  style="background-color:#924d23;"
                  onmouseover="this.style.backgroundColor='#723c1b'"
                  onmouseout="this.style.backgroundColor='#924d23'">
            Use My Location
          </button>
          <select id="area"
                  class="rounded-xl border border-gray-300 px-4 py-3 text-sm focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white">
            <option value="">Select province/area‚Ä¶</option>
            <option value="ncr">NCR (Metro Manila)</option>
            <option value="bulacan">Bulacan</option>
            <option value="cavite">Cavite</option>
            <option value="laguna">Laguna</option>
            <option value="batangas">Batangas</option>
            <option value="rizal">Rizal</option>
            <option value="pampanga">Pampanga</option>
            <option value="benguet">Benguet (Baguio)</option>
            <option value="pangasinan">Pangasinan</option>
            <option value="albay">Albay</option>
            <option value="cebu">Cebu</option>
            <option value="iloilo">Iloilo</option>
            <option value="negros_occ">Negros Occidental</option>
            <option value="bohol">Bohol</option>
            <option value="leyte">Leyte</option>
            <option value="zambo_del_sur">Zamboanga del Sur</option>
            <option value="misamis_or">Misamis Oriental</option>
            <option value="davao_del_sur">Davao del Sur</option>
            <option value="south_cotabato">South Cotabato</option>
          </select>
          <button id="goArea"
                  class="rounded-xl px-5 py-3 text-white text-sm transition"
                  style="background-color:#924d23;"
                  onmouseover="this.style.backgroundColor='#723c1b'"
                  onmouseout="this.style.backgroundColor='#924d23'">
            Open Map
          </button>
        </div>
        <p class="text-center text-xs text-gray-500 dark:text-gray-400 mt-3">
          Choose an area or let your browser share your location, we‚Äôll take you straight to the map.
        </p>
      </div>
    </section>
    <section class="value-props-section text-center py-20 px-4 dark:bg-gray-900" style="background:#d9ded8">
      <div class="grid md:grid-cols-3 gap-6 max-w-5xl mx-auto">
        <div class="p-4 bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200/60 dark:border-gray-700">
          <div class="text-2xl">üêæ</div>
          <div class="font-semibold mt-2">Pet-friendly filters</div>
          <p class="text-gray-600 dark:text-gray-300 text-sm">Indoor/outdoor seating, leash rules, contact.</p>
        </div>
        <div class="p-4 bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200/60 dark:border-gray-700">
          <div class="text-2xl">üó∫Ô∏è</div>
          <div class="font-semibold mt-2">PH-wide map</div>
          <p class="text-gray-600 dark:text-gray-300 text-sm">Limit map to the Philippines for clean UX.</p>
        </div>
        <div class="p-4 bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200/60 dark:border-gray-700">
          <div class="text-2xl">‚ö°</div>
          <div class="font-semibold mt-2">Fast & lightweight</div>
          <p class="text-gray-600 dark:text-gray-300 text-sm">Leaflet + Supabase ‚Äî no paid keys.</p>
        </div>
      </div>
    </section>
  </div>
  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";
    const SUPABASE_URL = "https://nxfumylpqlewcwiypida.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im54ZnVteWxwcWxld2N3aXlwaWRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyNDIwMTgsImV4cCI6MjA3MDgxODAxOH0.QuPrlLgT4rc2tZirzjZTwC_r7ftPVMZ1wLLM9R0depE";
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loadingScreen').classList.add('fade-out');
        const m = document.getElementById('mainContent');
        m.classList.remove('opacity-0'); m.classList.add('fade-in');
      }, 2000);
    });
    const settingsBtn  = document.getElementById('settingsBtn');
    const settingsMenu = document.getElementById('settingsMenu');
    settingsBtn.addEventListener('click', () => settingsMenu.classList.toggle('hidden'));
    document.addEventListener('click', (e) => {
      if (!settingsBtn.contains(e.target) && !settingsMenu.contains(e.target)) settingsMenu.classList.add('hidden');
    });
    const darkModeToggle = document.getElementById('darkModeToggle');
    function refreshDark(){
      darkModeToggle.textContent = document.documentElement.classList.contains('dark') ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
    }
    darkModeToggle.addEventListener('click', () => {
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
      refreshDark();
    });
    refreshDark();
    document.getElementById('logoutBtn').addEventListener('click', async () => {
      try { const { error } = await supabase.auth.signOut(); if (error) throw error; alert('Logged out.'); }
      catch(e){ alert('Logout error: ' + e.message); }
    });
    document.getElementById('useMyLocation').addEventListener('click', async () => {
      if (!navigator.geolocation) {
        alert('Geolocation is not supported by your browser.');
        return;
      }
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const { latitude, longitude } = pos.coords;
          location.href = `search.html?lat=${latitude.toFixed(6)}&lng=${longitude.toFixed(6)}`;
        },
        (err) => {
          alert('Location failed: ' + err.message + '\nTip: try on http://127.0.0.1 instead of file://');
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 10000 }
      );
    });
    document.getElementById('goArea').addEventListener('click', (e) => {
      const area = document.getElementById('area').value;
      if (!area) { alert('Please pick a province/area.'); return; }
      location.href = `search.html?area=${encodeURIComponent(area)}`;
    });
  </script>
</body>
</html>